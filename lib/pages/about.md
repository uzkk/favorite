这个项目的灵感来源于日文网站 [東方キャラソート](http://readalittle.net/sort/)。在编写时也有许多细节参考了这个网站。我们在此基础上，进行了一些改变：

1. 将全部内容翻译成了中文。
2. 对网站进行了移动端适配。
3. 增删了一些角色（比如增加了冴月麟，删除了旧作与新作重合的角色）。
4. 基于原网站缺乏角色在后期作品中出场的记录，我们重新将全部角色进行分类。
5. 结果页增加了与人气投票的对比，并添加了标签取向判断的功能。

下面是大家或许好奇的一些问题，我们将一一解答。

## 关于算法

这种排序的原理是 [Pairwise Comparison](https://en.wikipedia.org/wiki/Pairwise_comparison)。根据选择的顺序，结果可能会发生不同。排序的过程使用了堆排序。

计算标签取向的算法如下：假设你已经选出了你最喜欢的 $m$ 名角色，则将这些角色及人气排名前 $m$ 名取并集（设这个集合的大小为 $n$）。设 $r_i,p_i$ 分别表示第 $i$ 名角色你的排名结果和人气排名的结果（如果未出现在某个排名中，则取 $m+1$），并计算下面的值：

$$u_i=\tanh{\frac{p_i-r_i}{m}},\ v_i=\frac{1}{1+r_i}$$

从这些角色中取出所有含有第 $k$ 个标签的角色，设对应的下标集为 $\mathcal{I}$，则该标签的参考值为：

$$w_k=\frac{\sum_{i\in\mathcal{I}}u_i v_i}{\sum_{i=1}^{n}v_i}$$

这种计算方法仅供参考。如果有更好的建议，欢迎向我们提出。

## 更新日志

### 2019-04-12

- 新增了“疮痍”系列图片
- 优化了偏好参考值的算法
- 结果页面添加了统计信息

### 2019-04-11

- 将外传角色加入到默认配置中
- 添加了根据偏好参考值生成的提示语
- 设置界面增加了记忆功能，进入时将自动恢复到上一次的设置

### 2019-04-09

- 新增了随机选择功能
- 选择界面增加了 50 和 100 角色的选项
- 优化了按钮和单选框在手机界面上的显示

### 2019-04-07

- 重写了计算偏好参考值的逻辑
- 使用 TypeScript 重构了排序部分
- 取消了魂魄妖梦的萝莉标签

### 2019-04-05

- 新增了“笨蛋”和“制服”两个标签
- 将分类“东方文花帖”和“妖精大战争”合并为“外传 STG”
- 修复了一些人名错误（如：爱丽丝·玛格特洛依德）
- 修复了辉针城以后部分角色的出场信息缺失（如：琪露诺）

### 2019-04-03

- 优化了结果界面
- 对网站进行了移动端适配
- 将分类“旧作”进行进一步细分
- 新增了“妖精”和“兽娘”两个标签

### 2019-3-25

- 优化了设置界面
- 支持在选择时回退一步
- 新增了标签系统，包含“萝莉”和“BBA”两个标签

### 2019-3-23

- 初步实现原网站的功能
- 将全部内容翻译成了中文
- 增删了一些角色（比如增加了冴月麟，删除了旧作与新作重合的角色）

## 反馈和贡献

任何遇到的问题或者想到的创意都欢迎前往 [这里](https://github.com/uzkk/favorite/issues) 提出。

## 版权与协议

图片采用了画师 [dairi](https://www.pixiv.net/member_illust.php?id=4920496) 的作品。全部人物来源于东方 Project，版权属于上海爱丽丝幻乐团。

源代码已经开源到 [GitHub](https://github.com/uzkk/favorite)，遵循 [MIT](https://mit-license.org/) 协议。脚本的使用，修改，复制等是免费的。

<p>
  <router-link :to="UZKK_FAVORITE_BASE">点此返回测试页面</router-link>
</p>
