这个项目的灵感来源于日文网站 [東方キャラソート](http://readalittle.net/sort/)。在编写时也有许多细节参考了这个网站。我们在此基础上，进行了一些改变：

1. 将全部内容翻译成了中文。
2. 对网站进行了移动端适配。
3. 增删了一些角色（比如增加了冴月麟，删除了旧作与新作重合的角色）。
4. 基于原网站缺乏角色在后期作品中出场的记录，我们重新将全部角色进行分类。
5. 结果页增加了与人气投票的对比，并添加了标签取向判断的功能。

下面是大家或许好奇的一些问题，我们将一一解答。

## 关于算法

这种排序的原理是 [Pairwise Comparison](https://en.wikipedia.org/wiki/Pairwise_comparison)。根据选择的顺序，结果可能会发生不同。排序的过程使用了堆排序。

计算标签取向的算法如下：

$$w_k=\frac{1}{n}\sum_{i=1}^{n}\frac{\tanh{\frac{p_i-r_i}{n}}}{1+\min{\{p_i,r_i\}}}$$

其中 $r_i,p_i$ 分别表示对第 $i$ 个角色你的排名结果和人气排名的结果。这里参与计算的角色为：你的排名结果及人气排名前 $m$ 名的并集中拥有第 $k$ 个标签的角色（$m$ 为你的排名结果角色数）。

## 更新日志

### v1.2 (2019-04-07)

- 重写了计算偏好参考值的逻辑
- 使用 TypeScript 重构了排序部分
- 取消了魂魄妖梦的萝莉标签

### v1.1 (2019-04-05)

- 新增了“笨蛋”和“制服”两个标签
- 将分类“东方文花帖”和“妖精大战争”合并为“外传 STG”
- 修复了一些人名错误（如：爱丽丝·玛格特洛依德）
- 修复了辉针城以后部分角色的出场信息缺失（如：琪露诺）

### v1.0 (2019-04-03)

- 优化了结果界面
- 对网站进行了移动端适配
- 将分类“旧作”进行进一步细分
- 新增了“妖精”和“兽娘”两个标签

### v0.2 (2019-3-24)

- 优化了设置界面
- 支持在选择时回退一步
- 新增了标签系统，包含“萝莉”和“BBA”两个标签

### v0.1 (2019-3-23)

- 初步实现原网站的功能
- 将全部内容翻译成了中文
- 增删了一些角色（比如增加了冴月麟，删除了旧作与新作重合的角色）

## 反馈和贡献

任何遇到的问题或者想到的创意都欢迎前往 [这里](https://github.com/uzkk/favorite/issues) 提出。

## 版权与协议

图片采用了画师 [dairi](https://www.pixiv.net/member_illust.php?id=4920496) 的作品。全部人物来源于东方 Project，版权属于上海爱丽丝幻乐团。

源代码已经开源到 [GitHub](https://github.com/uzkk/favorite)，遵循 [MIT](https://mit-license.org/) 协议。脚本的使用，修改，复制等是免费的。

[点此返回测试页面](/favorite/)
